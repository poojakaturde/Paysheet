<div class="container-fluid pb-4">
    <button [routerLink]="'create-project'" type="button" class="btn btn-info btn-lg data-font wh-text"
        style="float: right">
        Create Project
    </button>
</div>
<div class="container  py-5">
    <div class=" mat-elevation-z0 px-3">
        <table mat-table [dataSource]="dataSource" matSort class="table table-hover">
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Name</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.name }}</td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Status</th>
                <td mat-cell *matCellDef="let element" class="data-font">
                    {{ element.status == true ? "Active" : "Inactive" }}
                </td>
            </ng-container>

            <ng-container matColumnDef="admin">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Admin</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.admin }}</td>
            </ng-container>

            <ng-container matColumnDef="role">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Role</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.role }}</td>
            </ng-container>

            <ng-container matColumnDef="manager">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Manager</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.manager }}</td>
            </ng-container>

            <ng-container matColumnDef="tasks">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Tasks</th>
                <td mat-cell *matCellDef="let element" class="data-font">
                    <ul>
                        <li *ngFor="let task of element.tasks">
                            {{task.task}}
                        </li>
                    </ul>
                </td>
            </ng-container>

            <ng-container matColumnDef="sdate">
                <th mat-header-cell *matHeaderCellDef class="heading-style">Start Date</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.sdate | date : 'longDate'}}</td>
            </ng-container>

            <ng-container matColumnDef="edate">
                <th mat-header-cell *matHeaderCellDef class="heading-style">End Date</th>
                <td mat-cell *matCellDef="let element" class="data-font">{{ element.edate | date : 'longDate' }}</td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="heading-style">
                    Action
                </th>
                <td mat-cell *matCellDef="let element">
                    <i class="material-icons" style="cursor: pointer"
                        (click)="onEditData(content, element)">edit</i>&nbsp;

                    <i class="material-symbols-outlined" style="cursor: pointer"
                        (click)="deleteProject(element)">delete</i>&nbsp;
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[3, 5, 10]" showFirstLastButtons
            aria-label="Select page of periodic elements">
        </mat-paginator>
    </div>
</div>
<!-- </mat-card> -->

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title heading-text" id="modal-basic-title">Project</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <form style="overflow: scroll; height: 450px; overflow-x: hidden;" [formGroup]="formValue">
            <div class="form-group">
                <div style="display:inline-block;width:47%">
                    <mat-form-field appearance="outline">
                        <mat-label>Project Name</mat-label>
                        <input matInput type="text" formControlName="name">
                    </mat-form-field>
                </div>

                <div style="display: inline-block; padding-left: 20px; width:47%">
                    <label class="heading-text">Status</label>
                    <br /><br />
                    <mat-slide-toggle formControlName="status" #myToggle class="heading-text">{{ myToggle.checked ?
                        "Active"
                        :
                        "Inactive" }}</mat-slide-toggle>
                </div>

                <div class="mb-3" style="display:inline-block;width:47%">
                    <mat-form-field appearance="outline">
                        <mat-label>Admin</mat-label>
                        <input type="text" placeholder="Pick one" aria-label="Admin" matInput formControlName="admin"
                            [matAutocomplete]="auto2">
                        <mat-autocomplete #auto2="matAutocomplete">
                            <mat-option *ngFor="let admin of admins" [value]="admin">
                                {{admin}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="mb-3" style="display:inline-block; padding-left: 10px;">
                    <mat-form-field appearance="outline">
                        <mat-label>Manager</mat-label>
                        <input type="text" placeholder="Pick one" aria-label="Manager" matInput
                            formControlName="manager" [matAutocomplete]="auto1">
                        <mat-autocomplete #auto1="matAutocomplete">
                            <mat-option *ngFor="let manager of managers" [value]="manager">
                                {{manager}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>

                <mat-form-field appearance="outline" style="width: 95%;">
                    <mat-label>Roles</mat-label>
                    <input type="text" placeholder="Pick one" aria-label="Roles" matInput formControlName="role"
                        [matAutocomplete]="auto3">
                    <mat-autocomplete #auto3="matAutocomplete">
                        <mat-option *ngFor="let role of roles" [value]="role">
                            {{role}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>

                <mat-form-field style="width: 95%;" appearance="outline">
                    <mat-label>Tasks</mat-label>
                    <mat-chip-list #chipList aria-label="Task selection">
                        <mat-chip *ngFor="let task of tasksSelected" (removed)="remove(task)">
                            <div *ngIf="task.selected">{{task.task}}</div>
                            <i class="material-icons" matChipRemove>cancel</i>
                        </mat-chip>
                        <input placeholder="" #taskInput formControlName="tasks" [matAutocomplete]="auto"
                            [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let task of allTasks" [value]="allTasks.task">
                            <div (click)="optionClicked($event, task);">
                                <mat-checkbox [checked]="task.selected" (change)="toggleSelection(task)"
                                    (click)="$event.stopPropagation()">
                                    {{ task.task }}
                                </mat-checkbox>
                            </div>
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>

                <div class="mb-3">
                    <mat-form-field appearance="outline" style="width: 95%;">
                        <mat-label>Choose Start date</mat-label>
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <input matInput [matDatepicker]="picker" formControlName="sdate">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="mb-3">
                    <mat-form-field appearance="outline" style="width: 95%;">
                        <mat-label>Choose End date</mat-label>
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <input matInput [matDatepicker]="picker1" formControlName="edate">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button *ngIf="showAdd" type="button" class="btn btn-color heading-text" (click)="addProject()">
            Add Detail
        </button>
        <button *ngIf="showbtn" type="button" (click)="updateData()" class="btn btn-color heading-text">
            Update Details
        </button>
    </div>
</ng-template>

<!------------------------------------------------Show Data------------------------------------->

<ng-template #contentView let-modal>
    <div class="modal-header">
        <h4 class="modal-title heading-text" id="modal-basic-title">Project</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <form style="overflow: scroll; height: 450px; overflow-x: hidden;" [formGroup]="formValue">
            <div class="form-group">
                <div style="display:inline-block;width:47%">
                    <mat-form-field appearance="outline">
                        <mat-label>Project Name</mat-label>
                        <input matInput type="text" formControlName="name">
                    </mat-form-field>
                </div>
                <div style="display: inline-block; padding-left: 20px; width:47%">
                    <label class="heading-text">Status</label>
                    <br /><br />
                    <mat-slide-toggle formControlName="status" #myToggle class="heading-text">{{ myToggle.checked ?
                        "Active"
                        :
                        "Inactive" }}</mat-slide-toggle>
                </div>
                <div class="mb-3" style="display:inline-block;width:47%">
                    <mat-form-field appearance="fill">
                        <mat-label>Admin</mat-label>
                        <input type="text" placeholder="Pick one" aria-label="Admin" matInput formControlName="admin"
                            [matAutocomplete]="auto2">
                        <mat-autocomplete #auto2="matAutocomplete">
                            <mat-option *ngFor="let admin of admins" [value]="admin">
                                {{admin}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="mb-3" style="display:inline-block; padding-left: 10px;">
                    <mat-form-field appearance="fill">
                        <mat-label>Manager</mat-label>
                        <input type="text" placeholder="Pick one" aria-label="Manager" matInput
                            formControlName="manager" [matAutocomplete]="auto1">
                        <mat-autocomplete #auto1="matAutocomplete">
                            <mat-option *ngFor="let manager of managers" [value]="manager">
                                {{manager}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="mb-3">
                    <mat-form-field appearance="fill" style="width: 95%;">
                        <mat-label>Roles</mat-label>
                        <input type="text" placeholder="Pick one" aria-label="Roles" matInput formControlName="role"
                            [matAutocomplete]="auto3">
                        <mat-autocomplete #auto3="matAutocomplete">
                            <mat-option *ngFor="let role of roles" [value]="role">
                                {{role}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <mat-form-field style="width: 95%;" appearance="fill">
                    <mat-label>Tasks</mat-label>
                    <mat-chip-list #chipList aria-label="Task selection">
                        <mat-chip *ngFor="let task of tasksSelected" (removed)="remove(task)">
                            <div *ngIf="task.selected">{{task.task}}</div>

                            <i class="material-icons" matChipRemove>cancel</i>
                        </mat-chip>
                        <input placeholder="" #taskInput formControlName="tasks" [matAutocomplete]="auto"
                            [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let task of allTasks" [value]="tasksSelected.task">
                            <div (click)="optionClicked($event, task);">
                                <mat-checkbox [checked]="task.selected" (change)="toggleSelection(task)"
                                    (click)="$event.stopPropagation()">
                                    {{ task.task }}
                                </mat-checkbox>
                            </div>
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>

                <div class="mb-3">
                    <mat-form-field appearance="fill" style="width: 95%;">
                        <mat-label>Choose Start date</mat-label>
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <input matInput [matDatepicker]="picker" formControlName="sdate">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="mb-3">
                    <mat-form-field appearance="fill" style="width: 95%;">
                        <mat-label>Choose End date</mat-label>
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <input matInput [matDatepicker]="picker1" formControlName="edate">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        </form>
    </div>
</ng-template>

